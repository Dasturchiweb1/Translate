<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Tarjimon (Barcha tillar)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial;
      background: #f0f0f0;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 10px;
      font-size: 16px;
    }
    select {
      padding: 10px;
      font-size: 16px;
      margin-right: 10px;
    }
    #output {
      background: #fff;
      padding: 10px;
      min-height: 100px;
      border: 1px solid #ccc;
      margin-top: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h2>online translator (To any language)</h2>

  <textarea id="inputText" placeholder="Enter text..."></textarea><br>

  <label>Source language:</label>
  <select id="sourceLang"></select>

  <label>Translation language:</label>
  <select id="targetLang"></select>

  <h3>Result:</h3>
  <div id="output">The translation appears here....</div>
Result
  <script>
    const languages = {
      "auto": "Auto detection",
      "uz": "O‘zbekcha",
      "en": "Inglizcha",
      "ru": "Ruscha",
      "tr": "Turkcha",
      "de": "Nemischa",
      "fr": "Fransuzcha",
      "es": "Ispancha",
      "it": "Italyancha",
      "pt": "Portugalcha",
      "ar": "Arabcha",
      "zh-CN": "Xitoycha",
      "ja": "Yaponcha",
      "ko": "Koreyscha",
      "hi": "Hindcha",
      "fa": "Forscha",
      "pl": "Polyakcha",
      "id": "Indonezcha",
      "ms": "Malay",
      "uk": "Ukraincha",
      "kk": "Qozoqcha",
      "ky": "Qirg‘izcha",
      "tg": "Tojikcha",
      "az": "Ozarbayjoncha"
    };

    const sourceSelect = document.getElementById("sourceLang");
    const targetSelect = document.getElementById("targetLang");

    // Dropdownga barcha tillarni joylaymiz
    for (const code in languages) {
      const opt1 = document.createElement("option");
      opt1.value = code;
      opt1.innerText = languages[code];
      sourceSelect.appendChild(opt1);

      const opt2 = document.createElement("option");
      opt2.value = code;
      opt2.innerText = languages[code];
      targetSelect.appendChild(opt2);
    }

    // Default tillar
    sourceSelect.value = "auto";
    targetSelect.value = "uz";

    let timer;

    document.getElementById("inputText").addEventListener("input", () => {
      clearTimeout(timer);
      timer = setTimeout(translateText, 500);
    });

    sourceSelect.addEventListener("change", translateText);
    targetSelect.addEventListener("change", translateText);

    async function translateText() {
      const text = document.getElementById("inputText").value.trim();
      if (text === "") {
        document.getElementById("output").innerText = "";
        return;
      }

      const from = sourceSelect.value;
      const to = targetSelect.value;

      try {
        const res = await fetch(
          `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`
        );
        const data = await res.json();
        document.getElementById("output").innerText = data[0][0][0];
      } catch (e) {
        document.getElementById("output").innerText = "❌ Xatolik: tarjima qilinmadi.";
      }
    }
  </script>
</body>
</html>
